#pragma once
#include <QListView>
#include <QMouseEvent>
#include <QTimer>

class ChatListView : public QListView
{
    Q_OBJECT

public:
    explicit ChatListView(QWidget *parent = nullptr);

signals:
    void deleteChatRequested(int row);

protected:
    void mouseMoveEvent(QMouseEvent *event) override;
    void mousePressEvent(QMouseEvent *event) override;
    void leaveEvent(QEvent *event) override;
    void paintEvent(QPaintEvent *event) override;

private:
    QPoint lastMousePos;
    int hoveredRow = -1;
    QTimer *hoverTimer;

    void updateHoveredItem(const QPoint &pos);
    void showDeleteButtonForItem(int row);
    void hideDeleteButtonForItem(int row);
};
